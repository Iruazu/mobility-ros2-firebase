{
    "name": "ROS2 Firebase Mobility Platform",
    "dockerFile": "Dockerfile",
    "context": "..",
    "mounts": [
        "source=${localWorkspaceFolder},target=/workspace,type=bind",
        "source=/tmp/.X11-unix,target=/tmp/.X11-unix,type=bind",
        // ★★★ WSLg/GPU アクセラレーションのために以下の2行を追加 ★★★
        "source=/mnt/wslg,target=/mnt/wslg,type=bind",
        "source=/usr/lib/wsl/lib,target=/usr/lib/wsl/lib,type=bind"
    ],
    "runArgs": [
        "--net=host",
        "--privileged",
        // ★★★ Intel GPU (WSLg) デバイスへのアクセス許可のために以下の2行を追加 ★★★
        "--device",
        "/dev/dxg",
        "--device",
        "/dev/dri",
        "--env=DISPLAY=${localEnv:DISPLAY}",
        "--env=WAYLAND_DISPLAY=${localEnv:WAYLAND_DISPLAY}",
        "--env=XDG_RUNTIME_DIR=${localEnv:XDG_RUNTIME_DIR}",
        "--env=PULSE_SERVER=unix:${localEnv:XDG_RUNTIME_DIR}/pulse/native"
    ],
    "containerEnv": {
        "DISPLAY": "${localEnv:DISPLAY}",
        "WAYLAND_DISPLAY": "${localEnv:WAYLAND_DISPLAY}",
        "XDG_RUNTIME_DIR": "${localEnv:XDG_RUNTIME_DIR}"
    },
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-python.python",
                "ms-python.flake8",
                "ms-vscode.cpptools",
                "ms-vscode.cmake-tools",
                "redhat.vscode-yaml",
                "ms-vscode.vscode-json",
                "streetsidesoftware.code-spell-checker",
                "ms-python.debugpy",
                "ms-vscode-remote.remote-containers"
            ],
            "settings": {
                "python.defaultInterpreterPath": "/usr/bin/python3",
                "python.linting.enabled": true,
                "python.linting.flake8Enabled": true,
                "editor.tabSize": 4,
                "editor.insertSpaces": true,
                "files.trimTrailingWhitespace": true,
                "terminal.integrated.shell.linux": "/bin/bash"
            }
        }
    },
    "postCreateCommand": "sudo rosdep update && rosdep install --from-paths src --ignore-src -r -y",
    "remoteUser": "developer"
}